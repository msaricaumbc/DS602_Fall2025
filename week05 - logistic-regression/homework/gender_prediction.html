<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gender Prediction Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card shadow">
                    <div class="card-body">
                        <h1 class="card-title text-center mb-4">Gender Prediction Form</h1>

                        <form id="genderForm">
                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="long_hair" name="long_hair"
                                        value="1">
                                    <label class="form-check-label" for="long_hair">Long Hair</label>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="forehead_width_cm" class="form-label">Forehead Width (cm)</label>
                                <input type="number" class="form-control" id="forehead_width_cm"
                                    name="forehead_width_cm" step="0.1" min="0" required>
                            </div>

                            <div class="mb-3">
                                <label for="forehead_height_cm" class="form-label">Forehead Height (cm)</label>
                                <input type="number" class="form-control" id="forehead_height_cm"
                                    name="forehead_height_cm" step="0.1" min="0" required>
                            </div>

                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="nose_wide" name="nose_wide"
                                        value="1">
                                    <label class="form-check-label" for="nose_wide">Nose Wide</label>
                                </div>
                            </div>

                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="nose_long" name="nose_long"
                                        value="1">
                                    <label class="form-check-label" for="nose_long">Nose Long</label>
                                </div>
                            </div>

                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="lips_thin" name="lips_thin"
                                        value="1">
                                    <label class="form-check-label" for="lips_thin">Lips Thin</label>
                                </div>
                            </div>

                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="distance_nose_to_lip_long"
                                        name="distance_nose_to_lip_long" value="1">
                                    <label class="form-check-label" for="distance_nose_to_lip_long">Distance Nose to Lip
                                        Long</label>
                                </div>
                            </div>

                            <button type="button" class="btn btn-success w-100" onclick="getGenderPrediction()">Predict
                                Gender</button>
                        </form>

                        <div id="result" class="alert mt-3" style="display: none;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function getGenderPrediction() {
            // Get form data
            const formData = {
                long_hair: document.getElementById('long_hair').checked ? 1 : 0,
                forehead_width_cm: parseFloat(document.getElementById('forehead_width_cm').value) || 0,
                forehead_height_cm: parseFloat(document.getElementById('forehead_height_cm').value) || 0,
                nose_wide: document.getElementById('nose_wide').checked ? 1 : 0,
                nose_long: document.getElementById('nose_long').checked ? 1 : 0,
                lips_thin: document.getElementById('lips_thin').checked ? 1 : 0,
                distance_nose_to_lip_long: document.getElementById('distance_nose_to_lip_long').checked ? 1 : 0
            };


            // Predict based on score
            const prediction = predictGender(formData);

            // Display result
            const resultDiv = document.getElementById('result');
            resultDiv.textContent = `Predicted Gender: ${prediction}`;
            resultDiv.className = `alert mt-3 alert-${prediction.toLowerCase() === 'male' ? 'primary' : 'danger'}`;
            resultDiv.style.display = 'block';

            return prediction;
        }

        // Alternative function that takes an object as parameter (as requested)
        // IMPORTANT: this function should return 'Female' or 'Male'
        function predictGender(obj) {
            console.log('predictGender for', obj);

            // let difference = obj.forehead_width_cm - obj.forehead_height_cm;

            // YOUR CODE HERE....
            let score = obj.long_hair * 0.1
                + obj.forehead_width_cm * 0.1
                + obj.forehead_height_cm * 0.1
                + obj.nose_wide * 0.1
                + obj.nose_long * 0.1
                + obj.lips_thin * 0.1
                + obj.distance_nose_to_lip_long * 0.1
                // + difference * 0.1
                + 0.1;

            let probability = sigmoid(score);

            console.log('probability', probability);

            const prediction = probability >= 0.5 ? 'Female' : 'Male';

            console.log('prediction', prediction);

            return prediction;
        }

        function sigmoid(z) {
            return 1 / (1 + Math.exp(-z));
        }
    </script>
</body>

</html>